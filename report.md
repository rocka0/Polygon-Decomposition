# <center>CSF364: Design and Analysis of Algorithms</center>
### <center>Assignment 1: Decomposition of simple polygons into convex polygons</center>
#### <center>Ashwin Arun (2020A7PS1291H)</center>
#### <center>Kavyanjali Agnihotri (2020A7PS0185H)</center>
#### <center>Tushar Brijesh Chenan (2020A7PS0253H)</center>

## Introduction

In this assignment, we were required to implement the research paper: [Algorithms for the decomposition of a polygon into convex polygons](https://doi.org/10.1016/S0377-2217%2899%2900033-8)

The paper primarily focuses on $2$ objectives:

1. Decomposing a given simple polygon into several non-overlapping convex polygons without the addition of any extra vertices.
2. Merging two or more convex polygons of the planar subdivision obtained above so as to reduce the number of convex polygons in the decomposition.

Our additional tasks were as follows:

1. Store the planar subdivision in a structure known as a [DCEL](https://en.wikipedia.org/wiki/Doubly_connected_edge_list) which allows us to effectively represent and query planar subdivisions.
2. Write a program to visualize the output of the algorithm, i.e, given a simple polygon, output the decomposition produced by the algorithm in a visually intuitive way.

## DCEL: The What and The How

Explain DCEL here

## Plotting the outputs

`plot.py` takes the following as **input files**:

- `input.txt`: First line is the number of coordinates in the original polygon followed by its coordinates in clockwise order.
- `before.txt`: First line is the number of polygons generated by the decomposition process. The next lines have the number of coordinates in decomposed polygons followed by their coordinates in clockwise order.
- `after.txt`: First line is the number of polygons after the merging process. The next lines have the number of coordinates in merged polygon followed by their coordinates in clockwise order.

It generates **three** plots as follows:

- `polygon.png`: Plot generated for the original polygon in `input.txt`.
- `before.png`: Plot generated for the decomposed polygons in `before.txt`.
- `after.png`: Plot generated for the merged polygons in `after.txt`. 

### Working:

1. For each input file, the coordinates are converted to floating points and extracted into a list. The starting coordinate is appended to the end of the list to close the polygon.

2. The code plots a simple scatter plot with lines between the consecutive points for the polygon in `input.txt`. The points are colored red.

3. The code plots each decomposition in `before.txt` using the plot function of Matplotlib. These decomposition are filled with a color (among 10 colors) using fill. The points of the original polygon are plotted(in red) using scatter plot on top of these decompositions.

4. Plot is generated for `after.txt` in a similar manner.

## Writing a simple polygon generator

`gen.py` is the script we are using to generate polygons of arbitrary size. The python script uses the `secrets` module which is cryptographically secure which means we have a minimum amount of bias in our randomness.

We first start by generating the number of vertices of our polygon $n$. We will refer to the collection of points as $P$. We then find the leftmost and rightmost endpoints of $P$ and connect them by a line called $l$. Line $l$ divides $P$ into $2$ sets - $U$ and $L$. $U$ is the set of points above the line $l$ and $L$ is the set of points below $l$.

We sort the points of $U$ in increasing order of $x$ coordinates and $L$ in decreasing order of $x$ coordinates. Then we concatenate $U$ with reverse list of $L$ which gives us a simple polygon.

## Sample runs of the code

### Simple polygon with $n = 16$

*input.txt*:

```text
16
83 885
629 825
670 481
852 475
865 967
907 466
976 218
632 246
525 344
487 26
401 323
279 134
272 293
253 738
126 728
88 775
```

*polygon.png*

<img src="img/simple/polygon.png"/>

*before.png*

<img src="img/simple/before.png"/>

*after.png*

<img src="img/simple/after.png"/>

### Simple polygon representing the boundary of India

*polygon.png*
<img src="img/geographic/polygon.png"/>

*before.png*
<img src="img/geographic/before.png"/>

*after.png*
<img src="img/geographic/after.png"/>


## Findings and analysis

> The following benchmarks performed on a tetradeca (14)-core 2.3 GHz 12th Gen Intel i7-12700H0 with 15.7 GiB of RAM and 1TB SSD; using Ubuntu 20.04.6 LTS x86_64 GNU/Linux 5.15.90.1-microsoft-standard-WSL2. The code was compiled with the following command: `g++ -std=c++17 -O3 src/app.cpp -o app`

### Running time *vs* Number of vertices in the simple polygon.

Plot $1$ goes here.

### Number of Decompositions (Before and After Merging) *vs* Number of vertices ($n$) in the simple polygon.

Plot $2$ goes here.

### Effect of starting point of decomposition on running time for a fixed number of vertices.

We compare the various outputs obtained on the following polygon depending on the starting point of our algorithm:

<img src="img/varyStartingVertex/polygon.png"/>

| Starting Point | Running Time ($\mu s$) | Number of Polygons (Before Merging) | Number of Polygons (After Merging) |
| -------------- | ---------------------- | ----------------------------------- | ---------------------------------- |
| a              | 2129                   | 9                                   | 6                                  |
| b              | 2013                   | 8                                   | 6                                  |
| c              | 2343                   | 9                                   | 6                                  |
| d              | 1962                   | 9                                   | 6                                  |
| e              | 1969                   | 8                                   | 6                                  |
| f              | 1941                   | 8                                   | 6                                  |
| g              | 1784                   | 10                                  | 6                                  |
| h              | 2134                   | 9                                   | 6                                  |
| i              | 1973                   | 9                                   | 6                                  |
| j              | 2134                   | 9                                   | 6                                  |
| k              | 1761                   | 8                                   | 6                                  |
| l              | 1836                   | 8                                   | 6                                  |
| m              | 1955                   | 10                                  | 6                                  |
| n              | 1810                   | 10                                  | 6                                  |
| o              | 1983                   | 9                                   | 6                                  |
